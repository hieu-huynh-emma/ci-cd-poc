{% assign catalogItems = section.blocks | where: 'type', 'catalog_item' %}

<section id="product-catalog-section" class="section-container spacing-{{ section.settings.container_spacing }}">
	<div class="section-chassis page-boundary">
		{% render 'section-header' %}
		
		<div class="grid-container splide">
			{% include 'splide-arrows' %}
			
			<div class="splide__track">
				<ul class="splide__list">
					{% for block in catalogItems %}
						<li class="splide__slide">
							<a href="{{ block.settings.product.url }}">
								{% render 'product-card', product: block.settings.product %}
							</a>
						</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
</section>

<script is="delay-script" phase="interactive" url="{{ 'product-catalog.js' | asset_url }}"></script>

{% schema %}
{
  "name": "Product Catalog",
  "blocks": [
    {
      "type": "catalog_item",
      "name": "Catalog Item",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        }
      ]
    }
  ],
  "settings": [
    {
      "id": "heading",
      "type": "text",
      "label": "Heading",
      "default": "Product Catalog"
    },
    {
      "id": "heading_alignment",
      "type": "select",
      "label": "Heading Alignment",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Right"
        }
      ],
      "default": "start"
    },
    {
      "type": "select",
      "id": "container_spacing",
      "options": [
        {
          "value": "lg",
          "label": "Large (60px)"
        },
        {
          "value": "md",
          "label": "Medium (40px)"
        }
      ],
      "default": "md",
      "label": "Container Spacing"
    }
  ]
}
{% endschema %}
