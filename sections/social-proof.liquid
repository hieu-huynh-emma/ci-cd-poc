{% assign influencers = section.blocks | where: "type", "influencer" %}

<section id="social-proof-section" class="relative flex flex-col items-center w-full">
  <div class="wrapper z-20 w-full">
    <div class="splide">
      {% include 'splide-arrows' %}

      <div class="splide__track">
        <ul class="splide__list">

          {%- for block in influencers -%}
            <li class="splide__slide">
              <div class="influencer">
                <img class="influencer__image" src="{{ block.settings.image | img_url: 'large' }}" width="100%" height="240" loading="lazy" />
                <div class="influencer__headings">
                  <p class="font-semibold">
                    {{ block.settings.heading }}
                  </p>
                  <p class="paragraph-10">
                    {{ block.settings.tag }}
                  </p>
                  <p class="paragraph-10">
                    {{ block.settings.location }}
                  </p>
                </div>
                <p class="paragraph-12 font-medium">
                  “{{ block.settings.content | remove: "<p>" | remove: "</p>"}}“
                </p>
              </div>
            </li>

          {%- endfor -%}
        </ul>
      </div>
    </div>
  </div>

</section>

<script defer type="module">
  $(document).ready(function () {
    new Splide('#social-proof-section .splide', {
      rewind: true,
      perPage: 4,
      perMove: 4,
      gap: '32px',
      breakpoints: {
        640: {
          perPage: 1,
          perMove: 1
        },
        912: {
          perPage: 2,
          perMove: 2
        },
        1200: {
          perPage: 3,
          perMove: 3
        },
      },
    }).mount();
  })
</script>

{% schema %}
{
  "name": "Social Proof",
  "blocks": [
    {
      "type": "influencer",
      "name": "Influencer",
      "settings": [
        {
          "id": "image",
          "type": "image_picker",
          "label": "Image"
        },
        {
          "id": "heading",
          "type": "text",
          "label": "Name"
        },
        {
          "id": "tag",
          "type": "text",
          "label": "Tag"
        },
        {
          "id": "location",
          "type": "text",
          "label": "Location"
        },
        {
          "id": "content",
          "type": "richtext",
          "label": "Content"
        }
      ]
    }
  ]
}
{% endschema %}
