{% assign wallpaper = section.blocks | where: 'type', 'wallpaper' | first %}
{% assign cta = section.blocks | where: 'type', 'cta' | first %}
{% assign countdown = section.blocks | where: 'type', 'countdown' | first %}

<style>
    #hero-banner-section .hero-banner-heading {
        color: {{ countdown.settings.mobile_color }};
    }

    #hero-banner-section .hero-banner-subtext {
        color: {{ cta.settings.mobile_color }};
    }

    @media (min-width: 768px) {
        #hero-banner-section .hero-banner-heading {
            color: {{ countdown.settings.desktop_color }};
        }

        #hero-banner-section .hero-banner-subtext {
            color: {{ cta.settings.desktop_color }};
        }
    }
</style>

{{ 'hero-banner.css' | asset_url | stylesheet_tag }}

<section id="hero-banner-section">
	<div class="page-boundary--full">
		<div class="section-content">
			<div class="text-box">
				<h1 class="hero-banner__title">{{ section.settings.title | remove: '<p>' | remove: '</p>' }}</h1>
				<h2 class="hero-banner__subtitle">{{ section.settings.subtitle }}</h2>
				<p class="hero-banner__tagline">{{ section.settings.tagline | remove: '<p>' | remove: '</p>' }}</p>
			</div>
			
			<div class="section-cta">
				{% if countdown != blank %}
					<div class="countdown">
						<p class="paragraph-14 font-semibold hero-banner-heading text-left">{{ countdown.settings.heading }}</p>
						<hero-banner-countdown-timer end-time="{{ countdown.settings.timer }}">
							<div class="countdown-timer">
								<div class="time-part">
									<p class="digit"></p>
									<p class="label">Days</p>
								</div>
								<div class="time-part">
									<p class="digit"></p>
									<p class="label">Hours</p>
								</div>
								<div class="time-part">
									<p class="digit"></p>
									<p class="label">Minutes</p>
								</div>
								<div class="time-part">
									<p class="digit"></p>
									<p class="label">Seconds</p>
								</div>
							</div>
						</hero-banner-countdown-timer>
					</div>
				{% endif %}
				
				{% if cta != blank %}
					<a class="btn btn--lg" href="{{ cta.settings.url }}">
						{{ cta.settings.text }}
					</a>
					
					<p class="cta-subtext hero-banner-subtext">{{ cta.settings.subtext }}</p>
				{% endif %}
			</div>
		</div>
	</div>
	
	{% if wallpaper != blank %}
		<div class="wallpaper">
			{{
			wallpaper.settings.src
			| image_url: width: 2680
			| image_tag: width: 2680, height: 640, class: 'hidden md:block mx-auto', loading: 'eager'
			}}
			{{
			wallpaper.settings.mobile_src
			| image_url: width: 768
			| image_tag: width: 768, height: 540, class: 'md:hidden', loading: 'eager'
			}}
		</div>
	{% endif %}
</section>

{% schema %}
{
  "name": "Hero Banner",
  "blocks": [
    {
      "type": "countdown",
      "name": "Countdown",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Countdown Title"
        },
        {
          "type": "color",
          "id": "desktop_color",
          "label": "Desktop Color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "mobile_color",
          "label": "Mobile Color",
          "default": "#000000"
        },
        {
          "type": "text",
          "id": "timer",
          "label": "Countdown Timer",
          "info": "Please follow format: YYYY-MM-DD HH:mm"
        }
      ]
    },
    {
      "type": "wallpaper",
      "name": "Wallpaper",
      "limit": 1,
      "settings": [
        {
          "id": "src",
          "type": "image_picker",
          "label": "Wallpaper Desktop Srouce"
        },
        {
          "id": "mobile_src",
          "type": "image_picker",
          "label": "Wallpaper Mobile Source"
        }
      ]
    },
    {
      "type": "cta",
      "name": "CTA",
      "limit": 1,
      "settings": [
        {
          "id": "url",
          "type": "url",
          "label": "Button Url"
        },
        {
          "id": "text",
          "type": "text",
          "label": "Button Text"
        },
        {
          "id": "subtext",
          "type": "text",
          "label": "Subtext"
        },
        {
          "type": "color",
          "id": "desktop_color",
          "label": "Desktop Color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "mobile_color",
          "label": "Mobile Color",
          "default": "#000000"
        }
      ]
    },
    {
      "type": "award",
      "name": "Award",
      "limit": 3,
      "settings": [
        {
          "id": "src",
          "type": "image_picker",
          "label": "Image"
        }
      ]
    }
  ],
  "settings": [
    {
      "id": "title",
      "type": "richtext",
      "label": "Title",
      "default": "<p>Hit snooze! Sleep is about to get <i>wayyy better.</i></p>"
    },
    {
      "id": "tagline",
      "type": "richtext",
      "label": "Tagline",
      "default": "<p>Hit snooze! Sleep is about to get <i>wayyy better.</i></p>"
    },
    {
      "id": "subtitle",
      "type": "text",
      "label": "Subtitle",
      "default": "Our sleep experts have mastered designing award-winning mattresses crafted to keep you relaxed and recharged, no matter what kind of sleeper you are. Climb on your best sleep yet!"
    }
  ]
}
{% endschema %}
