<style>
  #faq .faq__choices {
    display: grid;
    gap: 18px;
    grid-template-columns:repeat(auto-fit, minmax(140px, 1fr))
  }

  #faq .faq__choices a {
    height: 40px;
    line-height: 1.2;
    border-radius: 15px
  }

  #faq .accordion__content a,
  #faq .accordion__content a:visited {
    color: #3C4196;
    font-weight: bold;
    text-decoration: underline
  }
  #faq .accordion__content p {
    margin-bottom: 16px;
  }
  #faq .accordion__content p:last-child {
    margin-bottom: 0;
  }
  #faq .accordion__content ul {
    list-style: disc;
    margin: inherit;
    padding: 0 16px 0 24px;
  }
  #faq .accordion__content ul:last-child {
    padding-bottom: 0;
  }
  #faq .accordion__content ul li {
    font-size: 16px;
    margin-bottom: 4px;
  }
  #faq .accordion__content tr:first-child td:after,
  #faq .accordion__content tr:first-child th:after {
    border-bottom: 0;
  }

  #faq .accordion-wrapper.is-open .accordion-icon {
    transform: rotate(45deg)
  }

  #faq .faq-qa-section:nth-child(odd) {
    background-color: #F7F7F9
  }

  #faq .faq-qa-section:nth-child(even) {
    background-color: white
  }
</style>

<section id="faq-search-section">
  <div class="bg-[#F7F7F9] py-8 lg:py-12">
    <div class="mx-auto max-w-3xl px-4 sm:px-3 md:px-5">
      <h1 class="mb-8 text-center text-[26px] lg:mb-5 lg:text-[39px]">Frequently Asked Questions</h1>
      <div class="relative mb-6">
        <div class="relative">
          <input id="faq__search-input" class="outline-none shadow-none w-full border border-[#DDDDDF] py-3 pr-14 pl-5 text-sm font-medium lg:py-4 lg:pl-8 lg:text-lg" type="text" placeholder="How can we help you?" />
          <svg class="absolute right-3 top-1/2 -translate-y-1/2 transform" width="45" height="35" viewBox="0 0 45 35" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <rect y="-5" width="45" height="45" fill="url(#pattern0)" />
            <defs>
              <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
                <use xlink:href="#image0_8_5952" transform="scale(0.00357143)" />
              </pattern>
              <image id="image0_8_5952" width="280" height="280" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAYAAACHjumMAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4wLWMwMDAgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjUgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTA5LTA2VDEwOjIxOjE3KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wOS0wNlQxMDozMzoyNCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wOS0wNlQxMDozMzoyNCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozYjFkYzdlNi01ZWY4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" />
            </defs>
          </svg>
        </div>
        <div id="faq__search-autocomplete" class="absolute w-full bg-white shadow-md rounded-b-md hidden">
          <p class="px-6 py-4 font-semibold text-sm lg:text-base">TOP SUGGESTIONS</p>
          <ul id="faq__search-result-list" class="text-sm"></ul>
        </div>
      </div>
      {% if section.blocks.size > 0 %}
        <div class="faq__choices">
          {% for block in section.blocks %}
            <a class="px-1 hover:underline self-center text-center flex w-full items-center justify-center bg-[#3C4196] text-sm font-medium text-white" href="#{{ block.settings.slug }}">{{ block.settings.title }}</a>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</section>

<script type="module">
  const selectors = {
    searchInput$: $('#faq #faq__search-input'),
    autocomplete$: $('#faq #faq__search-autocomplete'),
    searchResultList$: $('#faq #faq__search-result-list'),
    getQuestionsMatchSearchTerm: (searchTerm) => $(`#faq p.faq-data-search-term:contains(${searchTerm})`)
  }

  selectors.searchInput$.on({
    'input click': function (e) {
      searchQuestions(e.target.value)
    },
    focusout: function () {
      selectors.autocomplete$.data('timer', setTimeout(function () {
        // hide autocomplete
        selectors.autocomplete$.addClass('hidden')
      }, 200))
    },
    focusin: function () {
      clearTimeout(selectors.autocomplete$.data('timer'));
    }
  })

  function searchQuestions(term) {
    const searchTerm = term.trim().toLowerCase()
    if (searchTerm) {
      const questions$ = selectors.getQuestionsMatchSearchTerm(searchTerm)
      if (questions$.length > 0) {
        renderSearchResult(selectors, questions$)
      } else {
        renderEmptySearchResult(selectors, searchTerm)
      }
      // show autocomplete
      selectors.autocomplete$.removeClass('hidden')
    } else {
      // hide autocomplete
      selectors.autocomplete$.addClass('hidden')
    }
  }

  function renderEmptySearchResult(selectors, searchTerm) {
    selectors.searchResultList$.empty()
    selectors.searchResultList$.append(`<li class="px-6 py-3 hover:bg-gray-100 cursor-pointer">No results for <strong>${searchTerm}</strong></li>`)
  }

  function renderSearchResult(selectors, questions$) {
    selectors.searchResultList$.empty()
    for (const question of questions$) {
      const question$ = $(question)
      const searchResult = document.createElement('li')
      searchResult.className = 'px-6 py-3 hover:bg-gray-100 cursor-pointer'
      searchResult.innerText = question$.siblings('.faq-data-search').html()
      searchResult.onclick = () => handleClickSearchResult(selectors, question$)
      selectors.searchResultList$.append(searchResult)
    }
  }

  function handleClickSearchResult(selectors, question$) {
    // hide autocomplete
    selectors.autocomplete$.addClass('hidden')
    // scroll to selected question
    const questionDataContainer = $(question$.get(0)).parent().parent().get(0)
    questionDataContainer.scrollIntoView()
    // expand accordion if not opened
    if (!$(questionDataContainer).hasClass('is-open')) {
      $(questionDataContainer).find('.accordion').click()
    }
  }
</script>

{% schema %}
{
  "name": "FAQ Search",
  "blocks": [
    {
      "type": "qna-button",
      "name": "QnA Button",
      "settings": [
        {
          "id": "title",
          "type": "text",
          "label": "Title"
        },
        {
          "id": "slug",
          "type": "text",
          "label": "Scroll to section slug",
          "info": "Same value with correspond Question & Answer section slug"
        }
      ]
    }
  ]
}
{% endschema %}