{% layout none %}
<script>
    const allStores = [
        {
            "languageCode": "en",
            "countryCode": "AU",
            "storeName": "Emma Australia (AU)",
            "storeUrl": "https://www.emma-sleep.com.au/"
        },
        {
            "languageCode": "de",
            "countryCode": "AT",
            "storeName": "Emma Austria (AT)",
            "storeUrl": "https://www.emma-matratze.at/"
        },
        {
            "languageCode": "fr",
            "countryCode": "BE",
            "storeName": "Emma Belgium (FR)",
            "storeUrl": "https://www.emma-matelas.be/"
        },
        {
            "languageCode": "nl",
            "countryCode": "BE",
            "storeName": "Emma Belgium (NL)",
            "storeUrl": "https://www.emma-matras.be/"
        },
        {
            "languageCode": "pt",
            "countryCode": "BR",
            "storeName": "Emma Brazil (BR)",
            "storeUrl": "https://store.colchoesemma.com.br/digital-booklet-br/"
        },
        {
            "languageCode": "en",
            "countryCode": "CA",
            "storeName": "Emma Canada (EN)",
            "storeUrl": "https://www.emma-sleep.ca/"
        },
        {
            "languageCode": "fr",
            "countryCode": "CA",
            "storeName": "Emma Canada (FR)",
            "storeUrl": "https://qc.emma-sleep.ca/"
        },
        {
            "languageCode": "es",
            "countryCode": "CL",
            "storeName": "Emma Chile (CL)",
            "storeUrl": "https://www.emma-colchon.cl/digital-booklet/"
        },
        {
            "languageCode": "da",
            "countryCode": "DK",
            "storeName": "Emma Denmark (DK)",
            "storeUrl": "https://www.emma.dk/"
        },
        {
            "languageCode": "fr",
            "countryCode": "FR",
            "storeName": "Emma France (FR)",
            "storeUrl": "https://www.emma.fr/digital-booklet/"
        },
        {
            "languageCode": "de",
            "countryCode": "DE",
            "storeName": "Emma Germany (DE)",
            "storeUrl": "https://www.emma-matratze.de/digital-booklet/"
        },
        {
            "languageCode": "en",
            "countryCode": "HK",
            "storeName": "Emma Hong Kong SAR China (EN)",
            "storeUrl": "https://en.emma-mattress.hk/digital-booklet/"
        },
        {
            "languageCode": "zh",
            "countryCode": "HK",
            "storeName": "Emma Hong Kong SAR China (繁體中文)",
            "storeUrl": "https://store.emma-mattress.hk/zh/digital-booklet/"
        },
        {
            "languageCode": "en",
            "countryCode": "IN",
            "storeName": "Emma India (IN)",
            "storeUrl": "https://www.emma-mattress.in/"
        },
        {
            "languageCode": "id",
            "countryCode": "ID",
            "storeName": "Emma Indonesia (ID)",
            "storeUrl": "https://www.emma-sleep.co.id/"
        },
        {
            "languageCode": "en",
            "countryCode": "IE",
            "storeName": "Emma Ireland (IE)",
            "storeUrl": "https://www.emma-sleep.ie/digital-booklet/"
        },
        {
            "languageCode": "it",
            "countryCode": "IT",
            "storeName": "Emma Italy (IT)",
            "storeUrl": "https://store.emma-materasso.it/digital-booklet/"
        },
        {
            "languageCode": "en",
            "countryCode": "JP",
            "storeName": "Emma Japan (JP)",
            "storeUrl": "https://www.emma-sleep.jp/"
        },
        {
            "languageCode": "en",
            "countryCode": "MY",
            "storeName": "Emma Malaysia (MY)",
            "storeUrl": "https://www.emma-sleep.com.my/"
        },
        {
            "languageCode": "es",
            "countryCode": "MX",
            "storeName": "Emma Mexico (MX)",
            "storeUrl": "https://www.emma-colchon.com.mx/ebooklet-digital/"
        },
        {
            "languageCode": "nl",
            "countryCode": "NL",
            "storeName": "Emma Netherlands (NL)",
            "storeUrl": "https://www.emma-sleep.nl/"
        },
        {
            "languageCode": "en",
            "countryCode": "NZ",
            "storeName": "Emma New Zealand (NZ)",
            "storeUrl": "https://www.emma-sleep.co.nz/"
        },
        {
            "languageCode": "en",
            "countryCode": "PH",
            "storeName": "Emma Philippines (PH)",
            "storeUrl": "https://www.emma-sleep.com.ph/"
        },
        {
            "languageCode": "pl",
            "countryCode": "PL",
            "storeName": "Emma Poland (PL)",
            "storeUrl": "https://www.emma-materac.pl/"
        },
        {
            "languageCode": "pt",
            "countryCode": "PT",
            "storeName": "Emma Portugal (PT)",
            "storeUrl": "https://store.colchaoemma.pt/digital-booklet/"
        },
        {
            "languageCode": "en",
            "countryCode": "SG",
            "storeName": "Emma Singapore (SG)",
            "storeUrl": "https://www.emma-sleep.com.sg/"
        },
        {
            "languageCode": "ko",
            "countryCode": "KR",
            "storeName": "Emma South Korea (KR)",
            "storeUrl": "https://www.emma-sleep.co.kr/pages/digital-booklet"
        },
        {
            "languageCode": "es",
            "countryCode": "ES",
            "storeName": "Emma Spain (ES)",
            "storeUrl": "https://www.emma-colchon.es/digital-booklet/"
        },
        {
            "languageCode": "sv",
            "countryCode": "SE",
            "storeName": "Emma Sweden (SE)",
            "storeUrl": "https://www.emma.se/"
        },
        {
            "languageCode": "de",
            "countryCode": "CH",
            "storeName": "Emma Switzerland (CH)",
            "storeUrl": "https://www.emma-matratze.ch/"
        },
        {
            "languageCode": "fr",
            "countryCode": "CH",
            "storeName": "Emma Switzerland (FR)",
            "storeUrl": "https://www.emma-matelas.ch/"
        },
        {
            "languageCode": "it",
            "countryCode": "CH",
            "storeName": "Emma Switzerland (IT)",
            "storeUrl": "https://www.emma-materasso.ch/"
        },
        {
            "languageCode": "en",
            "countryCode": "TW",
            "storeName": "Emma Taiwan (TW_EN)",
            "storeUrl": "https://store.emma-sleep.com.tw/digital-booklet/"
        },
        {
            "languageCode": "zh",
            "countryCode": "TW",
            "storeName": "Emma Taiwan (TW_ZH)",
            "storeUrl": "https://store.emma-sleep.com.tw/digital-booklet/"
        },
        {
            "languageCode": "th",
            "countryCode": "TH",
            "storeName": "Emma Thailand (TH)",
            "storeUrl": "https://www.emma.co.th/"
        },
        {
            "languageCode": "en",
            "countryCode": "GB",
            "storeName": "Emma U.K. (UK)",
            "storeUrl": "https://www.emma-sleep.co.uk/digital-booklet/"
        },
        {
            "languageCode": "en",
            "countryCode": "US",
            "storeName": "Emma U.S. (US)",
            "storeUrl": "https://www.emma-sleep.com/"
        },
        {
            "languageCode": "en",
            "countryCode": "VN",
            "storeName": "Emma Vietnam (VN)",
            "storeUrl": "https://www.emma-sleep.vn/"
        }
    ];

    const localizationGuard = async (ipgeo) => {
        if (ipgeo.country_code2 == 'US') {
            window.location.href = '/';
        } else {
            const store = allStores.find(s => s.countryCode == ipgeo.country_code2);
            if (store) {
                window.location.href = store.storeUrl;
            } else {
                window.location.href = '/';
            }
        }
    }

    const GEOLOCATION_API_KEY = "dedf743cfea543cfa1ce4f08be16125b";

    fetch(`https://api.ipgeolocation.io/ipgeo?apiKey=${GEOLOCATION_API_KEY}`)
        .then(res => res.json())
        .then(localizationGuard)
</script>