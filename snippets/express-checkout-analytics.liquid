<script>
    // (function () {
    //     const { fetch: originalFetch } = window;
    //
    //     window.fetch = async (...args) => {
    //         let [resource, config] = args;
    //
    //         if (resource.includes('/wallets/checkouts') && !resource.includes('calculate_shipping.json')) {
    //
    //             await originalFetch('/cart/clear');
    //
    //             const config = fetchConfig('javascript');
    //             config.headers['X-Requested-With'] = 'XMLHttpRequest';
    //             const form = document.querySelector('.product-form form');
    //             config.body = JSON.stringify({
    //                 ...JSON.parse(serializeForm(form))
    //             });
    //
    //             await originalFetch(`${routes.cart_add_url}`, config);
    //         }
    //
    //         return await originalFetch(resource, config);
    //     };
    // })();
</script>
