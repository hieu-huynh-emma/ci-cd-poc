<script>
    window.sprChatSettings = {
        "appId": "66c72471e84d4301e82a0e0f_app_300213122",
        "skin": "MODERN",
        "locale": "en",
        "clientContext": {"_c_6684f4a4eb609f763612ee2f": ["CA"]}
    };

    function loadLiveChat() {
        var t = window, e = t.sprChat, a = e && !!e.loaded, n = document, r = function () {r.m(arguments)};
        r.q = [], r.m = function (t) {r.q.push(t)}, t.sprChat = a ? e : r;
        var o = function () {
            var e = n.createElement("script");
            e.type = "text/javascript", e.async = !0, e.src = "https://prod3-live-chat.sprinklr.com/api/livechat/handshake/widget/" + t.sprChatSettings.appId;
            e.onerror = function () {t.sprChat.loaded = !1}, e.onload = function () {t.sprChat.loaded = !0};
            var a = n.getElementsByTagName("script")[0];
            a.parentNode.insertBefore(e, a)
        };
        "function" == typeof e ? a ? e("update", t.sprChatSettings) : o() : "loading" !== n.readyState ? o() : n.addEventListener("DOMContentLoaded", o)
    }

    window.addEventListener('scroll', dynamicChatOnScroll);


    function dynamicChatOnScroll(e) {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop,
            scrollHeight = document.body.scrollHeight,
            scrolledPercent = (scrollTop / scrollHeight) * 100;

        if (scrolledPercent > 40) {
            window.removeEventListener('scroll', dynamicChatOnScroll);

            loadLiveChat()
        }
    }
</script>
