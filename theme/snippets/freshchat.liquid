<script type="text/javascript">

  window.fcSettings = {
    token: 'b2b2897c-9240-4bdd-a965-9f4381519c6e',
    host: 'https://wchat.eu.freshchat.com',
    locale: 'en',
    tags: ['ca'],
    faqTags: {
      filterType: 'article',
      tags: ['general', 'shop_ca', 'faq_ca']
    }
  };

  function loadFreshchat() {
    var fc_JS = document.createElement('script');

    fc_JS.setAttribute("src", 'https://wchat.eu.freshchat.com/js/widget.js?t=' + Date.now());

    (document.body ? document.body : document.getElementsByTagName('head')[0]).appendChild(fc_JS);
  }

  window.addEventListener('scroll', dynamicFreshchatOnScroll);


  function dynamicFreshchatOnScroll(e) {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop,
      scrollHeight = document.body.scrollHeight,
      scrolledPercent = (scrollTop / scrollHeight) * 100;

    if (scrolledPercent > 40) {
      window.removeEventListener('scroll', dynamicFreshchatOnScroll);

      loadFreshchat()
    }
  }

</script>
