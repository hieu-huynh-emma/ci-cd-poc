{% assign awards = section.blocks | where: "type", "item" %}

<link rel="quickscript" loading="delayed" href="{{ 'logo-carousel.css' | asset_url }}">

<section abtasty-campaign-id="1296959" id="{{ section.id }}" class="logo-carousel">
    <div class="section-chassis page-boundary">
        {% render 'section-header' %}

        <div class="awards splide no-gutter">
            {% render 'splide-arrows', trackId: section.settings.trackId %}
            <div class="splide__track">
                <ul class="splide__list">
                    {%- for block in awards -%}
                        <li
                                class="splide__slide" data-quote="{{ block.settings.quote | escape }}"
                                data-heading="{{ block.settings.heading | escape }}"
                        >
                            {% capture icon %}
                                <img
                                        data-src="{{ block.settings.icon | image_url: width: 1080 }}"
                                        data-sizes="auto"
                                        alt="{{ block.settings.icon.alt }}"
                                        height="200"
                                        class="lazyload"
                                />
                            {% endcapture %}

                            {% if block.settings.link %}
                                <a href="{{ block.settings.link }}" target="_blank" class="awards__item">
                                    {{ icon }}
                                </a>
                            {% else %}
                                <div class="awards__item">{{ icon }}</div>
                            {% endif %}
                        </li>
                    {%- endfor -%}
                </ul>
            </div>
        </div>
    </div>

    <script type="quickscript" loading="visibility" src="{{ 'logo-carousel.js' | asset_url }}"></script>

</section>

{% schema %}
{
  "name": "Logo Carousel (Revamp)",
  "blocks": [
    {
      "type": "item",
      "name": "Item",
      "settings": [
        {
          "id": "heading",
          "type": "text",
          "label": "Heading"
        },
        {
          "id": "icon",
          "type": "image_picker",
          "label": "Icon"
        },
        {
          "id": "quote",
          "type": "richtext",
          "label": "Quote"
        },
        {
          "id": "link",
          "type": "url",
          "label": "Link"
        }
      ]
    }
  ],
  "settings": [
    {
      "id": "heading",
      "type": "text",
      "label": "Heading"
    },
    {
      "id": "heading_alignment",
      "type": "select",
      "label": "Heading Alignment",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Right"
        }
      ],
      "default": "start"
    },
    {
      "type": "text",
      "id": "trackId",
      "label": "Tracking ID"
    }
  ]
}
{% endschema %}
