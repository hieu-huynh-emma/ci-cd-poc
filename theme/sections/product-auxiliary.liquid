{% assign quick_compare = section.blocks | where: 'type', 'quick_compare' | first %}
{% assign upsell_widget = section.blocks | where: 'type', 'upsell_widget' | first %}
{% assign cross_sell_widget = section.blocks | where: 'type', 'cross_sell_widget' | first %}

<link rel="quickscript" loading="delayed" href="{{ 'product-auxiliary.css' | asset_url }}">
<script type="quickscript" src="{{ 'product-auxiliary.js' | asset_url }}"></script>

{% if upsell_widget %}
  <script type="quickscript" loading="delayed" src="{{ 'upsell-widget.js' | asset_url }}"></script>
  {% render 'product-upsell-widget', settings: upsell_widget.settings %}
{% endif %}

{% if cross_sell_widget %}
  <link rel="quickscript" loading="delayed" href="{{ 'cross-sell-widget.css' | asset_url }}">
  
  <script
    type="quickscript"
    loading="delayed"
    data-url="{{ 'cross-sell-widget.js' | asset_url }}"
    src="{{ 'module-importer.js' | asset_url }}"
  >
  </script>
  
  {% render 'cross-sell-widget' %}
{% endif %}

{% if quick_compare %}
  {% render 'quick-compare', settings: quick_compare.settings %}
{% endif %}




{% schema %}
{
  "name": "Product Auxiliary",
  "class": "hide-until-initialized",
  "blocks": [
    {
      "type": "cross_sell_widget",
      "name": "Cross-sell Widget",
      "settings": [
      ]
    },
    {
      "type": "upsell_widget",
      "name": "Upsell Widget",
      "settings": [
        {
          "id": "title",
          "type": "text",
          "label": "Title"
        },
        {
          "id": "content",
          "type": "richtext",
          "label": "Content"
        },
        {
          "id": "badge",
          "type": "text",
          "label": "Badge"
        },
        {
          "id": "image",
          "type": "image_picker",
          "label": "Featured Image"
        },
        {
          "id": "product",
          "type": "product",
          "label": "Upsell  Product"
        }
      ]
    },
    {
      "type": "quick_compare",
      "name": "Quick Compare",
      "settings": [
        {
          "id": "badge",
          "type": "text",
          "label": "Badge",
          "default": "$1239"
        },
        {
          "id": "note",
          "type": "text",
          "label": "Note",
          "default": "*For queen sizes only. All prices and information from public sources listed as of October 10, 2022. Information may not reflect updated prices and promotions."
        }
      ]
    }
  ],
  "settings": [
  ],
  "presets": [
    {
      "name": "Product Auxiliary"
    }
  ]
}
{% endschema %}
