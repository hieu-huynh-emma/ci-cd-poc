{% assign isUnavailable = false %}

{% if product.selected_or_first_available_variant.available == false %}
  {% assign isUnavailable = true %}
{% endif %}

<button
    type="submit"
    name="add"
    class="btn btn--block btn--rounded product-form__cart-submit add-to-cart-btn w-full
          {% if section.settings.enable_payment_button and product.selling_plan_groups == empty %} btn--secondary-accent{% endif %}
    "
    {% if isUnavailable %}disabled{% endif %}
>
  {% render 'icon-cart-empty' %}

  <span data-add-to-cart-text>
    {%- if isUnavailable -%}
      {{ 'products.product.sold_out' | t }}
    {%- else -%}
      {{ 'products.product.add_to_cart' | t }}
    {%- endif -%}
  </span>
  <div class="loading-overlay__spinner">
    <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66"
         xmlns="http://www.w3.org/2000/svg">
      <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
    </svg>
  </div>
</button>
